name: Validate Pull Request Target

on:
  pull_request:
    types: [opened, reopened, synchronize, edited]

jobs:
  check-target:
    runs-on: ubuntu-latest
    steps:
      - name: Ensure PR targets the correct branch
        if: |
          github.base_ref != 'dev' &&
          !(github.head_ref == 'dev' && github.base_ref == 'main')
        run: |
          echo "❌ Invalid PR target."
          echo "PRs should target 'dev', except when promoting 'dev' → 'main'."
          exit 1
